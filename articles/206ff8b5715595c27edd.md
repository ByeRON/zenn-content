---
title: "CNI"
emoji: "📝"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["Kubernetes"]
published: false
---

# はじめに
Kubernetesを2日触ってみたポエムです。

# CNI
Container Network Interfaceのこと。

コンテナとネットワークをつなぐものという説明をよく見るが、
厳密にはそれぞれ異なるpod内のコンテナ同士の通信を実現するものという認識。

パッと見NIC（Network Interface Card）っぽいので役割を覚えやすい。

# CNIに出会うタイミング
`kubeadm`でさっとノードを構築した際にDNSのコンテナが立ち上がらず`Not Ready`のまま。この状況を解決するときに触れる人が多そう。（自分も含め）

# CNIプラグイン所感
## Flannel
- ラズパイおうちKubernetesクラスタ需要を一手に背負う老舗
- ARMのCPUだとFlannel一択っぽいイメージ
- 開発が活発でない

## Calico
- アップデートが活発で採用例も多い

## その他
他のCNIプラグインも試してみてDNSのコンテナが立ち上がることは確認したが、正直ネットワークに明るくないので違いがよくわかっていない。

# CNIどれ使った
自分はCalicoを使いました。ラズパイクラスタではないのでFlannelに固執する理由がない＋Calicoのほうが動きが活発だったので。

# おわりに
CNIプラグインの選定、DNSのコンテナが動いた/動かないのような解像度が低いところで戦っているのでCNIごとの得意なアーキテクチャをしっかり認識していきたい。ただ、理解するための消費カロリーは高そうなのでとりあえずラズパイなら`Flannel`、じゃなければ`Calico`ぐらいで一旦使っていこうと思う。
